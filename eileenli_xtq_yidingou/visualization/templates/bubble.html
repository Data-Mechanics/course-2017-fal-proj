<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Bubble Chart</title>
    <!-- 引入 echarts.js -->
    <script src="echarts.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 1200px;height:800px;"></div>
    <script type="text/javascript">2
        //var echarts = require('echarts');
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
        var statement;

        statement = "bubble";

        switch (statement) {
            case "bubble":
                $.getJSON("schoolscore.json", function(json){
                    var list = [];
                    var data = [];

                    keys = $.map(json[0], function(v, i){
                        return i;
                    });
                    var sum = 0;

                    for (i = 0; i < Object.keys(json).length; i++) {
                        list.push([json[i]['traffic'], json[i]['safety'], Math.pow(10, json[i]['total'] / 10) * 10000000, json[i][keys[0]]]);
                    }
                    data.push(list);

                    option = {
                        backgroundColor: new echarts.graphic.RadialGradient(0.5, 0.5, 1.0, [{
                            offset: 0,
                            color: '#f7f8fa'
                        }, {
                            offset: 1,
                            color: '#cdd0d5'
                        }]),
                        title: {
                            text: 'Bubble Chart'
                        },
                        legend: {
                            right: 10,
                            //data: ['']
                        },
                        xAxis: {
                            splitLine: {
                                lineStyle: {
                                    type: 'dashed'
                                }
                            },
                            scale: true
                        },
                        yAxis: {
                            splitLine: {
                                lineStyle: {
                                    type: 'dashed'
                                }
                            },
                            scale: true
                        },
                        series: [{
                            name: '',
                            data: list,
                            type: 'scatter',
                            symbolSize: function (data) {
                                return Math.sqrt(data[2]) / 5e2;
                            },
                            label: {
                                emphasis: {
                                    show: true,
                                    formatter: function (param) {
                                        return param.data[3];
                                    },
                                    position: 'top'
                                }
                            },
                            itemStyle: {
                                normal: {
                                    shadowBlur: 10,
                                    shadowColor: 'rgba(120, 36, 50, 0.5)',
                                    shadowOffsetY: 5,
                                    color: new echarts.graphic.RadialGradient(0.4, 0.3, 1, [{
                                        offset: 0,
                                        color: 'rgb(251, 118, 123)'
                                    }, {
                                        offset: 1,
                                        color: 'rgb(204, 46, 72)'
                                    }])
                                }
                            }
                        }]
                    };
                    myChart.setOption(option);
                });
                break;
        }


    </script>
</body>
</html>