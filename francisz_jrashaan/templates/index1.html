<!DOCTYPE html>
<html>
<head>
	<title>Green Score Simulator</title>


    <link 
        rel="stylesheet" 
        href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css"
    />
    <script src="http://d3js.org/d3.v3.min.js"></script>


    <script src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js">
    </script>
</head>
<body>
    <script src="http://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v1.min.js"></script>        
	<div id="map" style="width: 800px; height: 600px; margin:0px;">
	</div>
    <!--style for slider -->
    <style>
        .wrapper {
      width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .wrapper > div {
      margin: 35px 0;
    }

    .d3-slider {
    position: relative;
    font-family: Verdana,Arial,sans-serif;
    font-size: 1.1em;
    border: 1px solid #aaaaaa;
    z-index: 2;
}

.d3-slider-horizontal {
    height: .8em;
}  

.d3-slider-range {
  background:#2980b9;
  left:0px;
  right:0px;
  height: 0.8em;
  position: absolute;
}


.d3-slider-handle {
    position: absolute;
    width: 1.2em;
    height: 1.2em;
    border: 1px solid #d3d3d3;
    border-radius: 4px;
    background: #eee;
    background: linear-gradient(to bottom, #eee 0%, #ddd 100%);
    z-index: 3;
}

.d3-slider-handle:hover {
    border: 1px solid #999999;
}

.d3-slider-horizontal .d3-slider-handle {
    top: -.3em;
    margin-left: -.6em;
}

.d3-slider-axis {
    position: relative;
    z-index: 1;    
}

.d3-slider-axis-bottom {
    top: .8em;
}

.d3-slider-axis-right {
    left: .8em;
}

.d3-slider-axis path {
    stroke-width: 0;
    fill: none;
}

.d3-slider-axis line {
    fill: none;
    stroke: #aaa;
    shape-rendering: crispEdges;
}

.d3-slider-axis text {
    font-size: 11px;
}
    </style>
    <!--slider label-->
    <label for="nbudget" 
         style="display: inline-block; width: 1000px; text-align: center ; ">
    </label>
    <!--slider -->
    <svg width="960" height="100"></svg>
    <script>
    //slider stuff    
        var svg = d3.select("svg"),
        margin = {right: 50, left: 20},
        width = +svg.attr("width") - margin.left - margin.right,
        height = +svg.attr("height");
        
      
    </script>    
	   <script type="text/javascript">
		    var map = L.map('map').setView([42.333233,  -71.10251], 13);
			   mapLink = '<a href="http://maps.wikimedia.org/</a>';
            var color = d3.scale.linear()
              .domain([0, 9])  
              .range(["blue", "green"]);
            
            var allston = {
                "type": "Feature",
                "properties": {
                    "name": "Allston", 
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.133675, 42.354584]
                }
            };
            L.geoJson(allston).addTo(map);
            var backbay = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.080427, 42.350164]
                }
            };
            L.geoJson(backbay).addTo(map);
            var southend = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.076683, 42.341072,]
                }
            };
            L.geoJson(southend).addTo(map);
            var westend = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.066469, 42.363986,]
                }
            };
            L.geoJson(westend).addTo(map);
            var northend = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.056599, 42.365152, ]
                }
            };
            L.geoJson(northend).addTo(map);
            var fenway = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.100733, 42.344822]
                }
            };
            L.geoJson(fenway).addTo(map);
            var chinatown = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.061400, 42.350996]
                }
            };
            L.geoJson(chinatown).addTo(map);
            var beaconhill = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.067295, 42.360137]
                }
            };
            L.geoJson(beaconhill).addTo(map);
            var leatherdistrict = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [ -71.057240, 42.351695]
                }
            };
            L.geoJson(leatherdistrict).addTo(map);
            var downtown = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [ -71.056699,  42.357218]
                }
            };
            L.geoJson(downtown).addTo(map);
            var charlestown = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.061298,  42.380463]
                }
            };
            L.geoJson(charlestown).addTo(map);
            var eastboston = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [ -71.0358883, 42.374938]
                }
            };
            L.geoJson(eastboston).addTo(map);
            var seaport = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.041274, 42.348285]
                }
            };
            L.geoJson(seaport).addTo(map);
            var southboston = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [ -71.048999, 42.335978]
                }
            };
            L.geoJson(southboston).addTo(map);
            var dorchester = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.065738, 42.306059]
                }
            };
            L.geoJson(dorchester).addTo(map);
            var brighton = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [ -71.162057, 42.349966]
                }
            };
            L.geoJson(brighton).addTo(map);
            var westroxbury = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.162981, 42.283245]
                }
            };
            L.geoJson(westroxbury).addTo(map);
            var hydepark = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [ -71.123670, 42.259365]
                }
            };
            L.geoJson(hydepark).addTo(map);
            var rosindale = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [ -71.127619, 42.286293]
                }
            };
            L.geoJson(rosindale).addTo(map);
            var roxbury = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [ -71.091435, 42.317771]
                }
            };
            L.geoJson(roxbury).addTo(map);
            var missionhill = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [ -71.107154, 42.332361]
                }
            };
            L.geoJson(missionhill).addTo(map);
            var mattapan = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.091313, 42.280343]
                }
            };
            L.geoJson(mattapan).addTo(map);
            var longwood = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.110424, 42.343783]
                }
            };
            L.geoJson(longwood).addTo(map);
            var bayvillage = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.069779, 42.349196]
                }
            };
            L.geoJson(bayvillage).addTo(map);
            var harborislands = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.006198, 42.317269]
                }
            };
            L.geoJson(harborislands).addTo(map);
            var jamaicaislands = {
                "type": "Feature",
                "properties": {
                    "name": "Back Bay ",
                    budget: "", 
                    new_score: "", 
                    old_score: "", 
                    Items:""
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-71.118910, 42.312894]
                }
            };
            L.geoJson(jamaicaislands).addTo(map);

            L.tileLayer('http://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png	', {
                attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            map._initPathRoot()    

            function getCorrelation() {
                var http = new XMLHttpRequest();
                var url = "http://localhost:3000/score";
                console.log(url);
                http.open("GET", url, true);
                http.setRequestHeader("Content-type", "application/json");
                http.onreadystatechange = function() {
                  if (http.readyState == 4 && http.status == 200) {
                    var data = JSON.parse(http.responseText).results;
                    console.log(data);
                    var arr = [];
                    //for (i in data) {
                    //	arr.push(L.marker([parseFloat(data[i].location[0]), parseFloat(data[i].location[1])]).bindPopup("Big Belly"));
                        // var circle = L.marker([parseFloat(data[i].location[0]), parseFloat(data[i].location[1])]).addTo(map);
                      //  var circle = L.circleMarker([parseFloat(data[i].location[0]), parseFloat(data[i].location[1])], {color: 'green', radius: 2}).bindPopup("Average Fullness: " + data[i].percentage).addTo(map);
                    //}
                    return arr;
                  }
                }
                http.send();
            };
            function getBudget() {
                var http = new XMLHttpRequest();
                var url = "http://localhost:3000/budgets";
                console.log(url);
                http.open("GET", url, true);
                http.setRequestHeader("Content-type", "application/json");
                http.onreadystatechange = function() {
                  if (http.readyState == 4 && http.status == 200) {
                    var data = JSON.parse(http.responseText).results;
                    console.log(data);
                    var arr = [];
                    //for (i in data) {
                    //	arr.push(L.marker([parseFloat(data[i].location[0]), parseFloat(data[i].location[1])]).bindPopup("Big Belly"));
                        // var circle = L.marker([parseFloat(data[i].location[0]), parseFloat(data[i].location[1])]).addTo(map);
                      //  var circle = L.circleMarker([parseFloat(data[i].location[0]), parseFloat(data[i].location[1])], {color: 'green', radius: 2}).bindPopup("Average Fullness: " + data[i].percentage).addTo(map);
                    //}
                    return arr;
                  }
                }
                http.send();
            };	
                (function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module.
    define(['d3'], factory);
  } else if (typeof exports === 'object') {
    if (process.browser) {
      // Browserify. Import css too using cssify.
      require('./d3.slider.css');
    }
    // Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    module.exports = factory(require('d3'));
  } else {
    // Browser globals (root is window)
    root.d3.slider = factory(root.d3);
  }
}(this, function (d3) {
return function module() {
  "use strict";

  // Public variables width default settings
  var min = 0,
      max = 100,
      step = 0.01,
      animate = true,
      orientation = "horizontal",
      axis = false,
      margin = 50,
      value,
      active = 1,
      snap = false,
      scale;

  // Private variables
  var axisScale,
      dispatch = d3.dispatch("slide", "slideend"),
      formatPercent = d3.format(".2%"),
      tickFormat = d3.format(".0"),
      handle1,
      handle2 = null,
      divRange,
      sliderLength;

  function slider(selection) {
    selection.each(function() {

      // Create scale if not defined by user
      if (!scale) {
        scale = d3.scale.linear().domain([min, max]);
      }

      // Start value
      value = value || scale.domain()[0];

      // DIV container
      var div = d3.select(this).classed("d3-slider d3-slider-" + orientation, true);
      
      var drag = d3.behavior.drag();
      drag.on('dragend', function () {
        dispatch.slideend(d3.event, value);
      })

      // Slider handle
      //if range slider, create two
      // var divRange;

      if (toType(value) == "array" && value.length == 2) {
        handle1 = div.append("a")
          .classed("d3-slider-handle", true)
          .attr("xlink:href", "#")
          .attr('id', "handle-one")
          .on("click", stopPropagation)
          .call(drag);
        handle2 = div.append("a")
          .classed("d3-slider-handle", true)
          .attr('id', "handle-two")
          .attr("xlink:href", "#")
          .on("click", stopPropagation)
          .call(drag);
      } else {
        handle1 = div.append("a")
          .classed("d3-slider-handle", true)
          .attr("xlink:href", "#")
          .attr('id', "handle-one")
          .on("click", stopPropagation)
          .call(drag);
      }
      
      // Horizontal slider
      if (orientation === "horizontal") {

        div.on("click", onClickHorizontal);
        
        if (toType(value) == "array" && value.length == 2) {
          divRange = d3.select(this).append('div').classed("d3-slider-range", true);

          handle1.style("left", formatPercent(scale(value[ 0 ])));
          divRange.style("left", formatPercent(scale(value[ 0 ])));
          drag.on("drag", onDragHorizontal);

          var width = 100 - parseFloat(formatPercent(scale(value[ 1 ])));
          handle2.style("left", formatPercent(scale(value[ 1 ])));
          divRange.style("right", width+"%");
          drag.on("drag", onDragHorizontal);

        } else {
          handle1.style("left", formatPercent(scale(value)));
          drag.on("drag", onDragHorizontal);
        }
        
        sliderLength = parseInt(div.style("width"), 10);

      } else { // Vertical

        div.on("click", onClickVertical);
        drag.on("drag", onDragVertical);
        if (toType(value) == "array" && value.length == 2) {
          divRange = d3.select(this).append('div').classed("d3-slider-range-vertical", true);

          handle1.style("bottom", formatPercent(scale(value[ 0 ])));
          divRange.style("bottom", formatPercent(scale(value[ 0 ])));
          drag.on("drag", onDragVertical);

          var top = 100 - parseFloat(formatPercent(scale(value[ 1 ])));
          handle2.style("bottom", formatPercent(scale(value[ 1 ])));
          divRange.style("top", top+"%");
          drag.on("drag", onDragVertical);

        } else {
          handle1.style("bottom", formatPercent(scale(value)));
          drag.on("drag", onDragVertical);
        }
        
        sliderLength = parseInt(div.style("height"), 10);

      }
      
      if (axis) {
        createAxis(div);
      }


      function createAxis(dom) {

        // Create axis if not defined by user
        if (typeof axis === "boolean") {

          axis = d3.svg.axis()
              .ticks(Math.round(sliderLength / 100))
              .tickFormat(tickFormat)
              .orient((orientation === "horizontal") ? "bottom" :  "right");

        }

        // Copy slider scale to move from percentages to pixels
        axisScale = scale.ticks ? scale.copy().range([0, sliderLength]) : scale.copy().rangePoints([0, sliderLength], 0.5);
          axis.scale(axisScale);

          // Create SVG axis container
        var svg = dom.append("svg")
            .classed("d3-slider-axis d3-slider-axis-" + axis.orient(), true)
            .on("click", stopPropagation);

        var g = svg.append("g");

        // Horizontal axis
        if (orientation === "horizontal") {

          svg.style("margin-left", -margin + "px");

          svg.attr({
            width: sliderLength + margin * 2,
            height: margin
          });

          if (axis.orient() === "top") {
            svg.style("top", -margin + "px");
            g.attr("transform", "translate(" + margin + "," + margin + ")");
          } else { // bottom
            g.attr("transform", "translate(" + margin + ",0)");
          }

        } else { // Vertical

          svg.style("top", -margin + "px");

          svg.attr({
            width: margin,
            height: sliderLength + margin * 2
          });

          if (axis.orient() === "left") {
            svg.style("left", -margin + "px");
            g.attr("transform", "translate(" + margin + "," + margin + ")");
          } else { // right          
            g.attr("transform", "translate(" + 0 + "," + margin + ")");
          }

        }

        g.call(axis);

      }

      function onClickHorizontal() {
        if (toType(value) != "array") {
          var pos = Math.max(0, Math.min(sliderLength, d3.event.offsetX || d3.event.layerX));
          moveHandle(scale.invert ? 
                      stepValue(scale.invert(pos / sliderLength))
                    : nearestTick(pos / sliderLength));
        }
      }

    

      function onDragHorizontal() {
        if ( d3.event.sourceEvent.target.id === "handle-one") {
          active = 1;
        } else if ( d3.event.sourceEvent.target.id == "handle-two" ) {
          active = 2;
        }
        var pos = Math.max(0, Math.min(sliderLength, d3.event.x));
        moveHandle(scale.invert ? 
                    stepValue(scale.invert(pos / sliderLength))
                  : nearestTick(pos / sliderLength));
      }

      function onDragVertical() {
        if ( d3.event.sourceEvent.target.id === "handle-one") {
          active = 1;
        } else if ( d3.event.sourceEvent.target.id == "handle-two" ) {
          active = 2;
        }
        var pos = sliderLength - Math.max(0, Math.min(sliderLength, d3.event.y))
        moveHandle(scale.invert ? 
                    stepValue(scale.invert(pos / sliderLength))
                  : nearestTick(pos / sliderLength));
      }

      function stopPropagation() {
        d3.event.stopPropagation();
      }

    });

  }

  // Move slider handle on click/drag
  function moveHandle(newValue) {
    var currentValue = toType(value) == "array"  && value.length == 2 ? value[active - 1]: value,
        oldPos = formatPercent(scale(stepValue(currentValue))),
        newPos = formatPercent(scale(stepValue(newValue))),
        position = (orientation === "horizontal") ? "left" : "bottom";
    if (oldPos !== newPos) {

      if (toType(value) == "array" && value.length == 2) {
        value[ active - 1 ] = newValue;
        if (d3.event) {
          dispatch.slide(d3.event, value );
        };
      } else {
        if (d3.event) {
          dispatch.slide(d3.event.sourceEvent || d3.event, value = newValue);
        };
      }

      if ( value[ 0 ] >= value[ 1 ] ) return;
      if ( active === 1 ) {
        if (toType(value) == "array" && value.length == 2) {
          (position === "left") ? divRange.style("left", newPos) : divRange.style("bottom", newPos);
        }

        if (animate) {
          handle1.transition()
              .styleTween(position, function() { return d3.interpolate(oldPos, newPos); })
              .duration((typeof animate === "number") ? animate : 250);
        } else {
          handle1.style(position, newPos);
        }
      } else {
        
        var width = 100 - parseFloat(newPos);
        var top = 100 - parseFloat(newPos);

        (position === "left") ? divRange.style("right", width + "%") : divRange.style("top", top + "%");
        
        if (animate) {
          handle2.transition()
              .styleTween(position, function() { return d3.interpolate(oldPos, newPos); })
              .duration((typeof animate === "number") ? animate : 250);
        } else {
          handle2.style(position, newPos);
        }
      }
    }
  }

  // Calculate nearest step value
  function stepValue(val) {

    if (val === scale.domain()[0] || val === scale.domain()[1]) {
      return val;
    }

    var alignValue = val;
    if (snap) {
      alignValue = nearestTick(scale(val));
    } else{
      var valModStep = (val - scale.domain()[0]) % step;
      alignValue = val - valModStep;

      if (Math.abs(valModStep) * 2 >= step) {
        alignValue += (valModStep > 0) ? step : -step;
      }
    };

    console.log(alignValue);

    return alignValue;

  }

  // Find the nearest tick
  function nearestTick(pos) {
    var ticks = scale.ticks ? scale.ticks() : scale.domain();
    var dist = ticks.map(function(d) {return pos - scale(d);});
    var i = -1,
        index = 0,
        r = scale.ticks ? scale.range()[1] : scale.rangeExtent()[1];
    do {
        i++;
        if (Math.abs(dist[i]) < r) {
          r = Math.abs(dist[i]);
          index = i;
        };
    } while (dist[i] > 0 && i < dist.length - 1);

    return ticks[index];
  };

  // Return the type of an object
  function toType(v) {
    return ({}).toString.call(v).match(/\s([a-zA-Z]+)/)[1].toLowerCase();
  };

  // Getter/setter functions
  slider.min = function(_) {
    if (!arguments.length) return min;
    min = _;
    return slider;
  };

  slider.max = function(_) {
    if (!arguments.length) return max;
    max = _;
    return slider;
  };

  slider.step = function(_) {
    if (!arguments.length) return step;
    step = _;
    return slider;
  };

  slider.animate = function(_) {
    if (!arguments.length) return animate;
    animate = _;
    return slider;
  };

  slider.orientation = function(_) {
    if (!arguments.length) return orientation;
    orientation = _;
    return slider;
  };

  slider.axis = function(_) {
    if (!arguments.length) return axis;
    axis = _;
    return slider;
  };

  slider.margin = function(_) {
    if (!arguments.length) return margin;
    margin = _;
    return slider;
  };

  slider.value = function(_) {
    if (!arguments.length) return value;
    if (value) {
      moveHandle(stepValue(_));
    };
    value = _;
    return slider;
  };

  slider.snap = function(_) {
    if (!arguments.length) return snap;
    snap = _;
    return slider;
  };

  slider.scale = function(_) {
    if (!arguments.length) return scale;
    scale = _;
    return slider;
  };

  d3.rebind(slider, dispatch, "on");

  return slider;

}
}));


    

    d3.select('#slider7').call(d3.slider().axis(true).min(200000).max(2500000).step(100000));
	
            getCorrelation();
            getBudget();
            function getData(){
                var http = new XMLHttpRequest();
                var url = "http://localhost:3000/budgets";
                http.open("GET", url, true);
                http.onload = function () {
                    // begin accessing JSON data here
                    var data = JSON.parse(this.response);

                    for (var i = 0; i < data.length; i++) {
                        console.log(data[i].name + ' is a ' + data[i].race + '.');
                    }
                }

                http.send();
            };
	</script>

</body>
</html>
